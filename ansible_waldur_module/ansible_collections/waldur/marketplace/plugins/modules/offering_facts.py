#!/usr/bin/python
#
# THIS FILE IS AUTOGENERATED BY THE ANSIBLE MODULE GENERATOR - DO NOT EDIT
#
from ansible.module_utils.basic import AnsibleModule
from ansible_collections.waldur.marketplace.plugins.module_utils.waldur.facts_runner import (
    FactsRunner,
)

ANSIBLE_METADATA = {
    "metadata_version": "1.1",
    "status": ["preview"],
    "supported_by": "OpenNode",
}

DOCUMENTATION = """
---
module: offering_facts
short_description: Get facts about a specific offering
description: ''
author: Waldur Team
options:
  access_token:
    description: An access token.
    required: true
    type: str
    no_log: true
  api_url:
    description: Fully qualified URL to the API.
    required: true
    type: str
  name:
    description: The name or UUID of the offering.
    type: str
    required: true
requirements:
- python >= 3.11

"""

EXAMPLES = """
- name: Retrieve and print facts about offerings
  hosts: localhost
  tasks:
  - name: Get facts about a specific offering
    waldur.marketplace.offering_facts:
      name: My Resource Name
      access_token: b83557fd8e2066e98f27dee8f3b3433cdc4183ce
      api_url: https://waldur.example.com
    register: resource_info
  - name: Print the retrieved resource facts
    ansible.builtin.debug:
      var: resource_info.offerings

"""

RETURN = """
resource:
  description: A list of dictionaries, where each dictionary represents a offering.
  type: list
  returned: always
  elements: dict
  contains:
    url:
      description: URL URL
      type: str
      returned: always
      sample: https://api.example.com/api/url/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    uuid:
      description: UUID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    created:
      description: Created
      type: str
      returned: always
      sample: '2023-10-01T12:00:00Z'
    name:
      description: Name
      type: str
      returned: always
      sample: My-Awesome-offering
    slug:
      description: Slug
      type: str
      returned: always
      sample: string-value
    description:
      description: Description
      type: str
      returned: always
      sample: A sample description created by Ansible.
    full_description:
      description: Full description
      type: str
      returned: always
      sample: string-value
    privacy_policy_link:
      description: Privacy policy link URL
      type: str
      returned: always
      sample: https://api.example.com/api/privacy-policy-link/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    access_url:
      description: Publicly accessible offering access URL
      type: str
      returned: always
      sample: https://api.example.com/api/access-url/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    endpoints:
      description: A list of endpoints items.
      type: list
      returned: always
      sample: []
      contains:
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        url:
          description: URL
          type: str
          returned: always
          sample: string-value
    roles:
      description: A list of roles items.
      type: list
      returned: always
      sample: []
      contains:
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        url:
          description: URL URL
          type: str
          returned: always
          sample: https://api.example.com/api/url/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    customer:
      description: Customer URL
      type: str
      returned: always
      sample: https://api.example.com/api/customer/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    customer_uuid:
      description: Customer UUID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    customer_name:
      description: Customer name
      type: str
      returned: always
      sample: Big Corp Inc.
    project:
      description: Project URL
      type: str
      returned: always
      sample: https://api.example.com/api/project/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    project_uuid:
      description: Project UUID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    project_name:
      description: Project name
      type: str
      returned: always
      sample: Internal Research Project
    category:
      description: Category URL
      type: str
      returned: always
      sample: https://api.example.com/api/category/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    category_uuid:
      description: Category UUID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    category_title:
      description: Category title
      type: str
      returned: always
      sample: string-value
    attributes:
      description: Attributes
      type: dict
      returned: always
      sample: {}
    options:
      description: Options
      type: str
      returned: always
      sample: null
    resource_options:
      description: Resource options
      type: str
      returned: always
      sample: null
    components:
      description: A list of components items.
      type: list
      returned: always
      sample: []
      contains:
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        billing_type:
          description: Billing type
          type: str
          returned: always
          sample: fixed
        type:
          description: Unique internal name of the measured unit, for example floating_ip.
          type: str
          returned: always
          sample: string-value
        name:
          description: Display name for the measured unit, for example, Floating IP.
          type: str
          returned: always
          sample: My-Awesome-offering
        description:
          description: Description
          type: str
          returned: always
          sample: A sample description created by Ansible.
        measured_unit:
          description: Unit of measurement, for example, GB.
          type: str
          returned: always
          sample: string-value
        unit_factor:
          description: The conversion factor from backend units to measured_unit
          type: int
          returned: always
          sample: 123
        limit_period:
          description: Limit period
          type: str
          returned: always
          sample: null
        limit_amount:
          description: Limit amount
          type: int
          returned: always
          sample: 123
        article_code:
          description: Article code
          type: str
          returned: always
          sample: string-value
        max_value:
          description: Max value
          type: int
          returned: always
          sample: 123
        min_value:
          description: Min value
          type: int
          returned: always
          sample: 123
        max_available_limit:
          description: Max available limit
          type: int
          returned: always
          sample: 123
        is_boolean:
          description: Is boolean
          type: bool
          returned: always
          sample: true
        default_limit:
          description: Default limit
          type: int
          returned: always
          sample: 123
        factor:
          description: Factor
          type: int
          returned: always
          sample: 123
        is_builtin:
          description: Is builtin
          type: bool
          returned: always
          sample: true
    plugin_options:
      description: Plugin options
      type: str
      returned: always
      sample: null
    state:
      description: State
      type: str
      returned: always
      sample: OK
    vendor_details:
      description: Vendor details
      type: str
      returned: always
      sample: string-value
    getting_started:
      description: Getting started
      type: str
      returned: always
      sample: string-value
    integration_guide:
      description: Integration guide
      type: str
      returned: always
      sample: string-value
    thumbnail:
      description: Thumbnail URL
      type: str
      returned: always
      sample: https://api.example.com/api/thumbnail/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    order_count:
      description: Order count
      type: int
      returned: always
      sample: 123
    plans:
      description: A list of plans items.
      type: list
      returned: always
      sample: []
      contains:
        url:
          description: URL URL
          type: str
          returned: always
          sample: https://api.example.com/api/url/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        description:
          description: Description
          type: str
          returned: always
          sample: A sample description created by Ansible.
        article_code:
          description: Article code
          type: str
          returned: always
          sample: string-value
        max_amount:
          description: Maximum number of plans that could be active. Plan is disabled when maximum amount is reached.
          type: int
          returned: always
          sample: 123
        archived:
          description: Forbids creation of new resources.
          type: bool
          returned: always
          sample: true
        is_active:
          description: Is active
          type: bool
          returned: always
          sample: true
        unit_price:
          description: Unit price
          type: str
          returned: always
          sample: '12.34'
        unit:
          description: Unit
          type: str
          returned: always
          sample: month
        init_price:
          description: Init price
          type: float
          returned: always
          sample: 123.45
        switch_price:
          description: Switch price
          type: float
          returned: always
          sample: 123.45
        backend_id:
          description: Backend ID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        organization_groups:
          description: A list of organization groups items.
          type: list
          returned: always
          sample: []
          contains:
            uuid:
              description: UUID
              type: str
              returned: always
              sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
            url:
              description: URL URL
              type: str
              returned: always
              sample: https://api.example.com/api/url/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
            name:
              description: Name
              type: str
              returned: always
              sample: My-Awesome-offering
            parent_uuid:
              description: Parent UUID
              type: str
              returned: always
              sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
            parent_name:
              description: Parent name
              type: str
              returned: always
              sample: string-value
            parent:
              description: Parent URL
              type: str
              returned: always
              sample: https://api.example.com/api/parent/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
            customers_count:
              description: Customers count
              type: int
              returned: always
              sample: 123
        prices:
          description: Prices
          type: dict
          returned: always
          sample: {}
        future_prices:
          description: Future prices
          type: dict
          returned: always
          sample: {}
        quotas:
          description: Quotas
          type: dict
          returned: always
          sample: {}
        resources_count:
          description: Resources count
          type: int
          returned: always
          sample: 123
        plan_type:
          description: Plan type
          type: str
          returned: always
          sample: string-value
        minimal_price:
          description: Minimal price
          type: float
          returned: always
          sample: 123.45
    screenshots:
      description: A list of screenshots items.
      type: list
      returned: always
      sample: []
      contains:
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        description:
          description: Description
          type: str
          returned: always
          sample: A sample description created by Ansible.
        image:
          description: Image URL
          type: str
          returned: always
          sample: https://api.example.com/api/image/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
        thumbnail:
          description: Thumbnail URL
          type: str
          returned: always
          sample: https://api.example.com/api/thumbnail/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
        created:
          description: Created
          type: str
          returned: always
          sample: '2023-10-01T12:00:00Z'
    type:
      description: Type
      type: str
      returned: always
      sample: string-value
    shared:
      description: Accessible to all customers.
      type: bool
      returned: always
      sample: true
    billable:
      description: Purchase and usage is invoiced.
      type: bool
      returned: always
      sample: true
    scope:
      description: Scope
      type: str
      returned: always
      sample: string-value
    scope_uuid:
      description: Scope UUID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    scope_name:
      description: Scope name
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    scope_state:
      description: Scope state
      type: str
      returned: always
      sample: null
    scope_error_message:
      description: Scope error message
      type: str
      returned: always
      sample: string-value
    files:
      description: A list of files items.
      type: list
      returned: always
      sample: []
      contains:
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        created:
          description: Created
          type: str
          returned: always
          sample: '2023-10-01T12:00:00Z'
        file:
          description: File URL
          type: str
          returned: always
          sample: https://api.example.com/api/file/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    quotas:
      description: A list of quotas items.
      type: list
      returned: always
      sample: []
      contains:
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        usage:
          description: Usage
          type: int
          returned: always
          sample: 123
        limit:
          description: Limit
          type: int
          returned: always
          sample: 123
    paused_reason:
      description: Paused reason
      type: str
      returned: always
      sample: string-value
    datacite_doi:
      description: Datacite doi
      type: str
      returned: always
      sample: string-value
    citation_count:
      description: Number of citations of a DOI
      type: int
      returned: always
      sample: 123
    latitude:
      description: Latitude
      type: float
      returned: always
      sample: 123.45
    longitude:
      description: Longitude
      type: float
      returned: always
      sample: 123.45
    country:
      description: Country
      type: str
      returned: always
      sample: null
    backend_id:
      description: Backend ID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    organization_groups:
      description: A list of organization groups items.
      type: list
      returned: always
      sample: []
      contains:
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        url:
          description: URL URL
          type: str
          returned: always
          sample: https://api.example.com/api/url/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        parent_uuid:
          description: Parent UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        parent_name:
          description: Parent name
          type: str
          returned: always
          sample: string-value
        parent:
          description: Parent URL
          type: str
          returned: always
          sample: https://api.example.com/api/parent/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
        customers_count:
          description: Customers count
          type: int
          returned: always
          sample: 123
    image:
      description: Image URL
      type: str
      returned: always
      sample: https://api.example.com/api/image/a1b2c3d4-e5f6-7890-abcd-ef1234567890/
    total_customers:
      description: Total customers
      type: int
      returned: always
      sample: 123
    total_cost:
      description: Total cost
      type: int
      returned: always
      sample: 123
    total_cost_estimated:
      description: Total cost estimated
      type: int
      returned: always
      sample: 123
    parent_description:
      description: Parent description
      type: str
      returned: always
      sample: string-value
    parent_uuid:
      description: Parent UUID
      type: str
      returned: always
      sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    parent_name:
      description: Parent name
      type: str
      returned: always
      sample: string-value
    backend_metadata:
      description: Backend metadata
      type: str
      returned: always
      sample: null
    has_compliance_requirements:
      description: Has compliance requirements
      type: bool
      returned: always
      sample: true
    google_calendar_is_public:
      description: Google calendar is public
      type: bool
      returned: always
      sample: true
    google_calendar_link:
      description: Get the Google Calendar link for an offering.
      type: str
      returned: always
      sample: string-value
    promotion_campaigns:
      description: A list of promotion campaigns items.
      type: list
      returned: always
      sample: []
      contains:
        uuid:
          description: UUID
          type: str
          returned: always
          sample: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        name:
          description: Name
          type: str
          returned: always
          sample: My-Awesome-offering
        start_date:
          description: Starting from this date, the campaign is active.
          type: str
          returned: always
          sample: '2023-10-01'
        end_date:
          description: The last day the campaign is active.
          type: str
          returned: always
          sample: '2023-10-01'
        discount_type:
          description: Discount type
          type: str
          returned: always
          sample: discount
        discount:
          description: Discount
          type: int
          returned: always
          sample: 123
        stock:
          description: Stock
          type: int
          returned: always
          sample: 123
        description:
          description: Description
          type: str
          returned: always
          sample: A sample description created by Ansible.
        months:
          description: How many months in a row should the related service (when activated) get special deal (0 for indefinitely until active)
          type: int
          returned: always
          sample: 123
        service_provider:
          description: Service provider URL
          type: str
          returned: always
          sample: https://api.example.com/api/service-provider/a1b2c3d4-e5f6-7890-abcd-ef1234567890/

"""

ARGUMENT_SPEC = {
    "access_token": {"type": "str", "no_log": True, "required": True},
    "api_url": {"type": "str", "required": True},
    "name": {"type": "str", "required": True},
}

RUNNER_CONTEXT = {
    "resource_type": "offering",
    "list_url": "/api/marketplace-public-offerings/",
    "retrieve_url": "/api/marketplace-public-offerings/{uuid}/",
    "identifier_param": "name",
    "resolvers": {},
    "many": False,
}


def main():
    """Main execution entrypoint for the Ansible module."""
    module = AnsibleModule(
        argument_spec=ARGUMENT_SPEC,
        supports_check_mode=True,
    )
    runner = FactsRunner(module, RUNNER_CONTEXT)
    runner.run()


if __name__ == "__main__":
    main()
